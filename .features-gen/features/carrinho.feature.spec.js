// Generated from: features\carrinho.feature
import { test } from "../../src/fixtures.ts";

test.describe('Tela de Carrinho', () => {

  test.beforeEach('Contexto', async ({ Given, homePage }, testInfo) => { if (testInfo.error) return;
    await Given('que entro no site "https://www.advantageonlineshopping.com"', null, { homePage }); 
  });
  
  test('Adicionar mais quantidadede de um mesmo produto ao carrinho', async ({ When, Then, And, carrinhoPage, homePage, page, produtoPage }) => { 
    await When('o usuário digita "HEADPHONES" na barra de busca', null, { homePage }); 
    await And('clica no ícone de lupa'); 
    await And('clica no produto "BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES" na lista de resultados', null, { homePage }); 
    await And('na página do produto, altera a quantidade para 3', null, { produtoPage }); 
    await And('clica no botão "ADD TO CART" na página do produto', null, { produtoPage }); 
    await Then('o produto deve aparecer no canto superior direito da tela como adicionado', {"dataTable":{"rows":[{"cells":[{"value":"Produto"},{"value":"Valor"},{"value":"Quantidade"}]},{"cells":[{"value":"BEATS STUDIO 2 OVER-EAR MAT"},{"value":"$539.97"},{"value":"3"}]}]}}, { page }); 
    await And('ao verificar o carrinho de compras, o produto deve estar listado corretamente com a quantidade correta', {"dataTable":{"rows":[{"cells":[{"value":"Produto"},{"value":"Valor"},{"value":"Quantidade"}]},{"cells":[{"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES"},{"value":"$539.97"},{"value":"3"}]}]}}, { carrinhoPage, produtoPage }); 
  });

  test('Editar a quantidade de um produto já adicionado no carrinho', async ({ When, Then, And, carrinhoPage, homePage, produtoPage }) => { 
    await When('o usuário digita "HEADPHONES" na barra de busca', null, { homePage }); 
    await And('clica no ícone de lupa'); 
    await And('clica no produto "BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES" na lista de resultados', null, { homePage }); 
    await And('clica no botão "ADD TO CART" na página do produto', null, { produtoPage }); 
    await And('o usuário abre o carrinho de compras', null, { produtoPage }); 
    await And('altera a quantidade do produto "BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES" para 4', null, { carrinhoPage }); 
    await And('clica no botão "ADD TO CART" na página do produto', null, { produtoPage }); 
    await Then('o carrinho de compras deve refletir a nova quantidade e valor total', {"dataTable":{"rows":[{"cells":[{"value":"Produto"},{"value":"Valor"},{"value":"Quantidade"}]},{"cells":[{"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES"},{"value":"719.96"},{"value":"4"}]}]}}, { carrinhoPage }); 
  });

  test('Remover os produtos do carrinho de compras', async ({ When, Then, And, carrinhoPage, homePage, page, produtoPage }) => { 
    await When('o usuário digita "HEADPHONES" na barra de busca', null, { homePage }); 
    await And('clica no ícone de lupa'); 
    await And('clica no produto "BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES" na lista de resultados', null, { homePage }); 
    await And('clica no botão "ADD TO CART" na página do produto', null, { produtoPage }); 
    await And('o usuário abre o carrinho de compras', null, { produtoPage }); 
    await And('remove o produto "BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES" do carrinho', null, { carrinhoPage }); 
    await Then('o carrinho de compras deve estar vazio', null, { page }); 
    await And('deve aparecer a mensagem "Your shopping cart is empty"', null, { page }); 
    await And('deve aparecer o botao "CONTINUE SHOPPING"', null, { page }); 
  });

  test('Verificar o total do carrinho após adicionar produtos', async ({ When, Then, And, carrinhoPage, homePage, produtoPage }) => { 
    await When('o usuário digita "HEADPHONES" na barra de busca', null, { homePage }); 
    await And('clica no ícone de lupa'); 
    await And('clica no produto "BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES" na lista de resultados', null, { homePage }); 
    await And('na página do produto, altera a quantidade para 3', null, { produtoPage }); 
    await And('clica no botão "ADD TO CART" na página do produto', null, { produtoPage }); 
    await And('o usuário volta para a página inicial', null, { homePage }); 
    await And('o usuário digita "MOUSE" na barra de busca', null, { homePage }); 
    await And('clica no ícone de lupa'); 
    await And('clica no produto "HP Z3200 WIRELESS MOUSE" na lista', null, { homePage }); 
    await And('clica no botão "ADD TO CART" na página do produto', null, { produtoPage }); 
    await And('na página do produto, altera a quantidade para 5', null, { produtoPage }); 
    await And('clica no botão "ADD TO CART" na página do produto', null, { produtoPage }); 
    await Then('o total do carrinho de compras deve ser 719.91', {"dataTable":{"rows":[{"cells":[{"value":"Produto"},{"value":"Valor"},{"value":"Quantidade"}]},{"cells":[{"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES"},{"value":"539.97"},{"value":"3"}]},{"cells":[{"value":"HP Z3200 WIRELESS MOUSE"},{"value":"179.94"},{"value":"6"}]}]}}, { carrinhoPage }); 
  });

  test('Realizar checkout a partir do carrinho de compras', async ({ When, Then, And, apiHelper, carrinhoPage, homePage, loginPage, page, produtoPage }) => { 
    await When('o usuário digita "HEADPHONES" na barra de busca', null, { homePage }); 
    await And('clica no ícone de lupa'); 
    await And('clica no produto "BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES" na lista de resultados', null, { homePage }); 
    await And('clica no botão "ADD TO CART" na página do produto', null, { produtoPage }); 
    await And('o usuário abre o carrinho de compras', null, { produtoPage }); 
    await And('clica no botão "CHECKOUT" no carrinho de compras', null, { apiHelper, carrinhoPage, page }); 
    await Then('deve ser redirecionado para a página de login', null, { page }); 
    await And('o usuário realiza login com email e senha válidos', null, { apiHelper, loginPage }); 
    await And('os detalhes do produto "BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES" devem estar corretos na página de checkout', {"dataTable":{"rows":[{"cells":[{"value":"Produto"},{"value":"Valor"},{"value":"Quantidade"}]},{"cells":[{"value":"BEATS STUDIO 2 OVER-EAR MAT..."},{"value":"179.99"},{"value":"1"}]}]}}, { page }); 
  });

});

// == technical section ==

test.use({
  $test: [({}, use) => use(test), { scope: 'test', box: true }],
  $uri: [({}, use) => use('features\\carrinho.feature'), { scope: 'test', box: true }],
  $bddFileData: [({}, use) => use(bddFileData), { scope: "test", box: true }],
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":10,"pickleLine":9,"tags":[],"steps":[{"pwStepLine":7,"gherkinStepLine":6,"keywordType":"Context","textWithKeyword":"Dado que entro no site \"https://www.advantageonlineshopping.com\"","isBg":true,"stepMatchArguments":[{"group":{"start":18,"value":"\"https://www.advantageonlineshopping.com\"","children":[{"start":19,"value":"https://www.advantageonlineshopping.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":11,"gherkinStepLine":10,"keywordType":"Action","textWithKeyword":"Quando o usuário digita \"HEADPHONES\" na barra de busca","stepMatchArguments":[{"group":{"start":17,"value":"\"HEADPHONES\"","children":[{"start":18,"value":"HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":12,"gherkinStepLine":11,"keywordType":"Action","textWithKeyword":"E clica no ícone de lupa","stepMatchArguments":[]},{"pwStepLine":13,"gherkinStepLine":12,"keywordType":"Action","textWithKeyword":"E clica no produto \"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\" na lista de resultados","stepMatchArguments":[{"group":{"start":17,"value":"\"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\"","children":[{"start":18,"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":14,"gherkinStepLine":13,"keywordType":"Action","textWithKeyword":"E na página do produto, altera a quantidade para 3","stepMatchArguments":[{"group":{"start":47,"value":"3","children":[]},"parameterTypeName":"int"}]},{"pwStepLine":15,"gherkinStepLine":14,"keywordType":"Action","textWithKeyword":"E clica no botão \"ADD TO CART\" na página do produto","stepMatchArguments":[]},{"pwStepLine":16,"gherkinStepLine":15,"keywordType":"Outcome","textWithKeyword":"Então o produto deve aparecer no canto superior direito da tela como adicionado","stepMatchArguments":[]},{"pwStepLine":17,"gherkinStepLine":18,"keywordType":"Outcome","textWithKeyword":"E ao verificar o carrinho de compras, o produto deve estar listado corretamente com a quantidade correta","stepMatchArguments":[]}]},
  {"pwTestLine":20,"pickleLine":22,"tags":[],"steps":[{"pwStepLine":7,"gherkinStepLine":6,"keywordType":"Context","textWithKeyword":"Dado que entro no site \"https://www.advantageonlineshopping.com\"","isBg":true,"stepMatchArguments":[{"group":{"start":18,"value":"\"https://www.advantageonlineshopping.com\"","children":[{"start":19,"value":"https://www.advantageonlineshopping.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":21,"gherkinStepLine":23,"keywordType":"Action","textWithKeyword":"Quando o usuário digita \"HEADPHONES\" na barra de busca","stepMatchArguments":[{"group":{"start":17,"value":"\"HEADPHONES\"","children":[{"start":18,"value":"HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":22,"gherkinStepLine":24,"keywordType":"Action","textWithKeyword":"E clica no ícone de lupa","stepMatchArguments":[]},{"pwStepLine":23,"gherkinStepLine":25,"keywordType":"Action","textWithKeyword":"E clica no produto \"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\" na lista de resultados","stepMatchArguments":[{"group":{"start":17,"value":"\"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\"","children":[{"start":18,"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":24,"gherkinStepLine":26,"keywordType":"Action","textWithKeyword":"E clica no botão \"ADD TO CART\" na página do produto","stepMatchArguments":[]},{"pwStepLine":25,"gherkinStepLine":27,"keywordType":"Action","textWithKeyword":"E o usuário abre o carrinho de compras","stepMatchArguments":[]},{"pwStepLine":26,"gherkinStepLine":28,"keywordType":"Action","textWithKeyword":"E altera a quantidade do produto \"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\" para 4","stepMatchArguments":[{"group":{"start":31,"value":"\"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\"","children":[{"start":32,"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":85,"value":"4","children":[]},"parameterTypeName":"int"}]},{"pwStepLine":27,"gherkinStepLine":29,"keywordType":"Action","textWithKeyword":"E clica no botão \"ADD TO CART\" na página do produto","stepMatchArguments":[]},{"pwStepLine":28,"gherkinStepLine":30,"keywordType":"Outcome","textWithKeyword":"Então o carrinho de compras deve refletir a nova quantidade e valor total","stepMatchArguments":[]}]},
  {"pwTestLine":31,"pickleLine":34,"tags":[],"steps":[{"pwStepLine":7,"gherkinStepLine":6,"keywordType":"Context","textWithKeyword":"Dado que entro no site \"https://www.advantageonlineshopping.com\"","isBg":true,"stepMatchArguments":[{"group":{"start":18,"value":"\"https://www.advantageonlineshopping.com\"","children":[{"start":19,"value":"https://www.advantageonlineshopping.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":32,"gherkinStepLine":35,"keywordType":"Action","textWithKeyword":"Quando o usuário digita \"HEADPHONES\" na barra de busca","stepMatchArguments":[{"group":{"start":17,"value":"\"HEADPHONES\"","children":[{"start":18,"value":"HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":36,"keywordType":"Action","textWithKeyword":"E clica no ícone de lupa","stepMatchArguments":[]},{"pwStepLine":34,"gherkinStepLine":37,"keywordType":"Action","textWithKeyword":"E clica no produto \"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\" na lista de resultados","stepMatchArguments":[{"group":{"start":17,"value":"\"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\"","children":[{"start":18,"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":35,"gherkinStepLine":38,"keywordType":"Action","textWithKeyword":"E clica no botão \"ADD TO CART\" na página do produto","stepMatchArguments":[]},{"pwStepLine":36,"gherkinStepLine":39,"keywordType":"Action","textWithKeyword":"E o usuário abre o carrinho de compras","stepMatchArguments":[]},{"pwStepLine":37,"gherkinStepLine":40,"keywordType":"Action","textWithKeyword":"E remove o produto \"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\" do carrinho","stepMatchArguments":[{"group":{"start":17,"value":"\"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\"","children":[{"start":18,"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":38,"gherkinStepLine":41,"keywordType":"Outcome","textWithKeyword":"Então o carrinho de compras deve estar vazio","stepMatchArguments":[]},{"pwStepLine":39,"gherkinStepLine":42,"keywordType":"Outcome","textWithKeyword":"E deve aparecer a mensagem \"Your shopping cart is empty\"","stepMatchArguments":[{"group":{"start":25,"value":"\"Your shopping cart is empty\"","children":[{"start":26,"value":"Your shopping cart is empty","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":40,"gherkinStepLine":43,"keywordType":"Outcome","textWithKeyword":"E deve aparecer o botao \"CONTINUE SHOPPING\"","stepMatchArguments":[{"group":{"start":22,"value":"\"CONTINUE SHOPPING\"","children":[{"start":23,"value":"CONTINUE SHOPPING","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":43,"pickleLine":45,"tags":[],"steps":[{"pwStepLine":7,"gherkinStepLine":6,"keywordType":"Context","textWithKeyword":"Dado que entro no site \"https://www.advantageonlineshopping.com\"","isBg":true,"stepMatchArguments":[{"group":{"start":18,"value":"\"https://www.advantageonlineshopping.com\"","children":[{"start":19,"value":"https://www.advantageonlineshopping.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":44,"gherkinStepLine":46,"keywordType":"Action","textWithKeyword":"Quando o usuário digita \"HEADPHONES\" na barra de busca","stepMatchArguments":[{"group":{"start":17,"value":"\"HEADPHONES\"","children":[{"start":18,"value":"HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":45,"gherkinStepLine":47,"keywordType":"Action","textWithKeyword":"E clica no ícone de lupa","stepMatchArguments":[]},{"pwStepLine":46,"gherkinStepLine":48,"keywordType":"Action","textWithKeyword":"E clica no produto \"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\" na lista de resultados","stepMatchArguments":[{"group":{"start":17,"value":"\"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\"","children":[{"start":18,"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":47,"gherkinStepLine":49,"keywordType":"Action","textWithKeyword":"E na página do produto, altera a quantidade para 3","stepMatchArguments":[{"group":{"start":47,"value":"3","children":[]},"parameterTypeName":"int"}]},{"pwStepLine":48,"gherkinStepLine":50,"keywordType":"Action","textWithKeyword":"E clica no botão \"ADD TO CART\" na página do produto","stepMatchArguments":[]},{"pwStepLine":49,"gherkinStepLine":51,"keywordType":"Action","textWithKeyword":"E o usuário volta para a página inicial","stepMatchArguments":[]},{"pwStepLine":50,"gherkinStepLine":52,"keywordType":"Action","textWithKeyword":"E o usuário digita \"MOUSE\" na barra de busca","stepMatchArguments":[{"group":{"start":17,"value":"\"MOUSE\"","children":[{"start":18,"value":"MOUSE","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":51,"gherkinStepLine":53,"keywordType":"Action","textWithKeyword":"E clica no ícone de lupa","stepMatchArguments":[]},{"pwStepLine":52,"gherkinStepLine":54,"keywordType":"Action","textWithKeyword":"E clica no produto \"HP Z3200 WIRELESS MOUSE\" na lista","stepMatchArguments":[{"group":{"start":17,"value":"\"HP Z3200 WIRELESS MOUSE\"","children":[{"start":18,"value":"HP Z3200 WIRELESS MOUSE","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":53,"gherkinStepLine":55,"keywordType":"Action","textWithKeyword":"E clica no botão \"ADD TO CART\" na página do produto","stepMatchArguments":[]},{"pwStepLine":54,"gherkinStepLine":56,"keywordType":"Action","textWithKeyword":"E na página do produto, altera a quantidade para 5","stepMatchArguments":[{"group":{"start":47,"value":"5","children":[]},"parameterTypeName":"int"}]},{"pwStepLine":55,"gherkinStepLine":57,"keywordType":"Action","textWithKeyword":"E clica no botão \"ADD TO CART\" na página do produto","stepMatchArguments":[]},{"pwStepLine":56,"gherkinStepLine":58,"keywordType":"Outcome","textWithKeyword":"Então o total do carrinho de compras deve ser 719.91","stepMatchArguments":[{"group":{"start":40,"value":"719.91","children":[]},"parameterTypeName":"float"}]}]},
  {"pwTestLine":59,"pickleLine":63,"tags":[],"steps":[{"pwStepLine":7,"gherkinStepLine":6,"keywordType":"Context","textWithKeyword":"Dado que entro no site \"https://www.advantageonlineshopping.com\"","isBg":true,"stepMatchArguments":[{"group":{"start":18,"value":"\"https://www.advantageonlineshopping.com\"","children":[{"start":19,"value":"https://www.advantageonlineshopping.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":60,"gherkinStepLine":64,"keywordType":"Action","textWithKeyword":"Quando o usuário digita \"HEADPHONES\" na barra de busca","stepMatchArguments":[{"group":{"start":17,"value":"\"HEADPHONES\"","children":[{"start":18,"value":"HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":61,"gherkinStepLine":65,"keywordType":"Action","textWithKeyword":"E clica no ícone de lupa","stepMatchArguments":[]},{"pwStepLine":62,"gherkinStepLine":66,"keywordType":"Action","textWithKeyword":"E clica no produto \"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\" na lista de resultados","stepMatchArguments":[{"group":{"start":17,"value":"\"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\"","children":[{"start":18,"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":63,"gherkinStepLine":67,"keywordType":"Action","textWithKeyword":"E clica no botão \"ADD TO CART\" na página do produto","stepMatchArguments":[]},{"pwStepLine":64,"gherkinStepLine":68,"keywordType":"Action","textWithKeyword":"E o usuário abre o carrinho de compras","stepMatchArguments":[]},{"pwStepLine":65,"gherkinStepLine":69,"keywordType":"Action","textWithKeyword":"E clica no botão \"CHECKOUT\" no carrinho de compras","stepMatchArguments":[]},{"pwStepLine":66,"gherkinStepLine":70,"keywordType":"Outcome","textWithKeyword":"Então deve ser redirecionado para a página de login","stepMatchArguments":[]},{"pwStepLine":67,"gherkinStepLine":71,"keywordType":"Outcome","textWithKeyword":"E o usuário realiza login com email e senha válidos","stepMatchArguments":[]},{"pwStepLine":68,"gherkinStepLine":72,"keywordType":"Outcome","textWithKeyword":"E os detalhes do produto \"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\" devem estar corretos na página de checkout","stepMatchArguments":[{"group":{"start":23,"value":"\"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES\"","children":[{"start":24,"value":"BEATS STUDIO 2 OVER-EAR MATTE BLACK HEADPHONES","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
]; // bdd-data-end